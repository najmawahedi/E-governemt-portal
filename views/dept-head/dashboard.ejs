<h2>Department Head Dashboard - <%= department.name %></h2>

<!-- Stats Cards -->
<div class="row mb-4">
  <div class="col-md-3">
    <div class="card text-white bg-primary">
      <div class="card-body">
        <h5>Total Requests</h5>
        <h3><%= stats.total_requests || 0 %></h3>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card text-white bg-warning">
      <div class="card-body">
        <h5>Pending</h5>
        <h3><%= stats.pending_requests || 0 %></h3>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card text-white bg-success">
      <div class="card-body">
        <h5>Approved</h5>
        <h3><%= stats.approved_requests || 0 %></h3>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card text-white bg-info">
      <div class="card-body">
        <h5>Department Officers</h5>
        <h3><%= stats.total_officers || 0 %></h3>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <!-- Recent Requests -->
    <div class="card">
      <div class="card-header">
        <h5>Recent Requests</h5>
      </div>
      <div class="card-body">
        <% if (recentRequests.length === 0) { %>
          <p class="text-muted">No recent requests</p>
        <% } else { %>
          <div class="list-group">
            <% recentRequests.forEach(req => { %>
              <div class="list-group-item">
                <div class="d-flex w-100 justify-content-between">
                  <h6 class="mb-1"><%= req.service_name %></h6>
                  <small>
                    <span class="badge 
                      <% if (req.status === 'approved') { %>bg-success<% } %>
                      <% if (req.status === 'rejected') { %>bg-danger<% } %>
                      <% if (req.status === 'submitted' || req.status === 'under_review') { %>bg-warning<% } %>
                    ">
                      <%= req.status %>
                    </span>
                  </small>
                </div>
                <p class="mb-1">Citizen: <%= req.citizen_name %></p>
                <small class="text-muted">Submitted: <%= new Date(req.created_at).toLocaleDateString() %></small>
              </div>
            <% }) %>
          </div>
        <% } %>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <!-- Quick Actions -->
    <div class="card">
      <div class="card-header">
        <h5>Quick Actions</h5>
      </div>
      <div class="card-body">
        <a href="/dept-head/officers" class="btn btn-primary w-100 mb-2">
          Manage Officers
        </a>
        <a href="/dept-head/reports" class="btn btn-info w-100 mb-2">
          View Reports
        </a>
        <a href="/officer/dashboard" class="btn btn-success w-100 mb-2">
          Review Requests
        </a>
        <a href="/officer/search" class="btn btn-secondary w-100">
          Search Requests
        </a>
      </div>
    </div>

    <!-- Department Officers -->
    <div class="card mt-3">
      <div class="card-header">
        <h5>Department Officers</h5>
      </div>
      <div class="card-body">
        <% if (officers.length === 0) { %>
          <p class="text-muted">No officers in your department</p>
        <% } else { %>
          <div class="list-group">
            <% officers.forEach(officer => { %>
              <div class="list-group-item">
                <h6 class="mb-1"><%= officer.name %></h6>
                <p class="mb-1 text-muted"><%= officer.email %></p>
                <small>Joined: <%= new Date(officer.created_at).toLocaleDateString() %></small>
              </div>
            <% }) %>
          </div>
        <% } %>
      </div>
    </div>
  </div>
</div>